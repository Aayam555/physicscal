<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>River Crossing Problem Solver</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                processEscapes: true
            }
        });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        canvas {
            background-color: #e2e8f0;
            border-radius: 0.5rem;
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="bg-white rounded-lg shadow-xl p-8 max-w-4xl w-full">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">River Crossing Problem Solver</h1>
        
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">The Problem</h2>
            <p class="text-gray-600">Two swimmers leave point $A$ on one bank of the river to reach point $B$ lying right across on the other bank. One of them crosses the river along the straight line $AB$ while the other swims at right angles to the stream and then walks the distance that he has been carried away by the stream to get to point $B$. What was the velocity $u$ of his walking if both swimmers reached the destination simultaneously? The stream velocity $v_0 = 2.0 \text{ kmh}^{-1}$ and the velocity $v'$ of each swimmer with respect to water equals $2.5 \text{ kmh}^{-1}$.</p>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">Simulation</h2>
            <p class="text-gray-600 mb-4">Click "Start" to see the two swimmers cross the river simultaneously.</p>
            <div class="flex justify-center items-center space-x-4 mb-4">
                <button id="startButton" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-full shadow-lg hover:bg-blue-700 transition-colors">Start</button>
                <button id="resetButton" class="px-6 py-2 bg-red-600 text-white font-semibold rounded-full shadow-lg hover:bg-red-700 transition-colors">Reset</button>
            </div>
            <div class="flex items-center space-x-4 mb-4 justify-center">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-purple-600 rounded-full mr-2"></div>
                    <span class="text-sm text-gray-700">Swimmer 1</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-600 rounded-full mr-2"></div>
                    <span class="text-sm text-gray-700">Swimmer 2</span>
                </div>
            </div>
            <p id="timeDisplay" class="text-center text-gray-700 font-mono mb-4">Time: 0.00 s</p>
            <canvas id="simulationCanvas" width="800" height="400" class="border-2 border-gray-300"></canvas>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">Step-by-Step Breakdown</h2>
            <div id="solutionSteps" class="text-gray-600">
                <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Step 1: Analyze the First Swimmer's Motion</h3>
                        <p class="text-gray-600 mb-2">The first swimmer's resultant velocity, $\vec{v}_1$, is perpendicular to the stream. The velocities form a right-angled triangle, allowing us to use the Pythagorean theorem to find the magnitude of $v_1$.</p>
                        <p class="text-center text-lg font-mono text-gray-800 mb-4">$v_1 = \sqrt{(2.5)^2 - (2.0)^2} = 1.5 \text{ kmh}^{-1}$</p>
                        <p class="text-gray-600">The time taken to cross the river of width $d$ is $t_1 = \frac{d}{1.5}$.</p>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Step 2: Analyze the Second Swimmer's Motion</h3>
                        <p class="text-gray-600 mb-2">This swimmer swims perpendicular to the stream but is carried downstream by the current. The time to swim across the river is:</p>
                        <p class="text-center text-lg font-mono text-gray-800 mb-4">$t_{\text{swim}} = \frac{d}{2.5}$</p>
                        <p class="text-gray-600">The distance they are carried downstream is $x = v_0 \cdot t_{\text{swim}} = 2.0 \cdot \frac{d}{2.5} = 0.8d$. The time to walk this distance at velocity $u$ is $t_{\text{walk}} = \frac{0.8d}{u}$.</p>
                        <p class="text-gray-600">Total time for the second swimmer: $t_2 = t_{\text{swim}} + t_{\text{walk}} = \frac{d}{2.5} + \frac{0.8d}{u}$.</p>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">Step 3: Equate Times and Solve for $u$</h3>
                        <p class="text-gray-600 mb-2">Since both swimmers arrive at the same time, we set $t_1 = t_2$ and solve for $u$.</p>
                        <p class="text-center text-lg font-mono text-gray-800 mb-4">$\frac{d}{1.5} = \frac{d}{2.5} + \frac{0.8d}{u}$</p>
                        <p class="text-gray-600 mb-2">Dividing by $d$ and solving for $u$ gives:</p>
                        <p class="text-center text-lg font-mono text-gray-800 mb-4">$u = 0.8 \left( \frac{1}{1.5} - \frac{1}{2.5} \right)^{-1} = 3.0 \text{ kmh}^{-1}$</p>
                    </div>
            </div>
        </div>
    </div>
    
    <script>
        window.onload = function() {
            const solutionSteps = document.getElementById('solutionSteps');
            const startButton = document.getElementById('startButton');
            const resetButton = document.getElementById('resetButton');
            const timeDisplay = document.getElementById('timeDisplay');
            const canvas = document.getElementById('simulationCanvas');
            const ctx = canvas.getContext('2d');

            // Constants based on the problem
            const v_prime = 2.5; // Swimmer's velocity wrt water (km/h)
            const v_0 = 2.0; // Stream velocity (km/h)
            const u = 3.0; // Walking velocity (km/h)
            const riverWidth = 0.5; // Assume river width is 0.5 km for calculation simplicity

            // Calculated values
            const v1_resultant = Math.sqrt(v_prime * v_prime - v_0 * v_0); // Swimmer 1 resultant velocity (km/h)
            const t1_total = riverWidth / v1_resultant; // Total time for Swimmer 1 (h)
            const t2_swim = riverWidth / v_prime; // Swimming time for Swimmer 2 (h)
            const t2_walk = (v_0 * t2_swim) / u; // Walking time for Swimmer 2 (h)
            
            // Simulation state
            let time = 0;
            let animationFrameId = null;
            let isRunning = false;
            let riverFlowOffset = 0;

            // Swimmer positions (in km)
            let swimmer1 = { x: 0, y: 0, finished: false };
            let swimmer2 = { x: 0, y: 0, finished: false, isWalking: false };

            // Drawing properties
            const scale = 800; // pixels per km
            const riverHeight = riverWidth * scale;
            const riverStart = canvas.height / 2 - riverHeight / 2;
            const riverEnd = canvas.height / 2 + riverHeight / 2;
            const bankWidth = 50; // A fixed width for banks

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#b3e5fc'; // Light blue for river
                ctx.fillRect(bankWidth, riverStart, canvas.width - 2 * bankWidth, riverHeight);

                // Draw banks
                ctx.fillStyle = '#6b7280';
                ctx.fillRect(0, riverStart, canvas.width, 5);
                ctx.fillRect(0, riverEnd, canvas.width, 5);

                // Draw river flow lines
                ctx.strokeStyle = '#cbd5e1';
                ctx.setLineDash([10, 10]);
                for (let i = 0; i < canvas.width; i += 30) {
                    ctx.beginPath();
                    ctx.moveTo(i - riverFlowOffset, riverStart + 20);
                    ctx.lineTo(i + 15 - riverFlowOffset, riverStart + 20);
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.moveTo(i - riverFlowOffset, riverEnd - 20);
                    ctx.lineTo(i + 15 - riverFlowOffset, riverEnd - 20);
                    ctx.stroke();
                }
                ctx.setLineDash([]);

                // Draw start and end points
                ctx.fillStyle = '#4b5563';
                ctx.font = '16px Inter';
                ctx.fillText('A', bankWidth - 10, riverStart - 5);
                ctx.fillText('B', bankWidth - 10, riverEnd + 20);

                // Draw swimmers
                ctx.beginPath();
                ctx.arc(bankWidth + swimmer1.x * scale, riverStart + swimmer1.y * scale, 8, 0, 2 * Math.PI);
                ctx.fillStyle = '#8b5cf6';
                ctx.fill();

                ctx.beginPath();
                ctx.arc(bankWidth + swimmer2.x * scale, riverStart + swimmer2.y * scale, 8, 0, 2 * Math.PI);
                ctx.fillStyle = '#dc2626';
                ctx.fill();
            }

            function update() {
                const deltaTime = 0.002; // small time step in hours
                time += deltaTime;
                riverFlowOffset += v_0 * 50 * deltaTime; // River flow animation speed

                if (riverFlowOffset >= 30) {
                    riverFlowOffset = 0;
                }

                if (!swimmer1.finished) {
                    swimmer1.y += v1_resultant * deltaTime;
                    if (swimmer1.y >= riverWidth) {
                        swimmer1.y = riverWidth;
                        swimmer1.finished = true;
                    }
                }

                if (!swimmer2.finished) {
                    if (!swimmer2.isWalking) {
                        // Swimming phase
                        swimmer2.x += v_0 * deltaTime;
                        swimmer2.y += v_prime * deltaTime;
                        if (swimmer2.y >= riverWidth) {
                            swimmer2.y = riverWidth;
                            swimmer2.isWalking = true;
                        }
                    } else {
                        // Walking phase
                        swimmer2.x -= u * deltaTime;
                        if (swimmer2.x <= 0) {
                            swimmer2.x = 0;
                            swimmer2.finished = true;
                        }
                    }
                }

                timeDisplay.textContent = `Time: ${time.toFixed(2)} h`;

                if (swimmer1.finished && swimmer2.finished) {
                    stopSimulation();
                    timeDisplay.textContent = `Time: ${t1_total.toFixed(2)} h (Finished)`;
                }
            }

            function gameLoop() {
                update();
                draw();
                if (isRunning) {
                    animationFrameId = requestAnimationFrame(gameLoop);
                }
            }

            function startSimulation() {
                if (!isRunning) {
                    isRunning = true;
                    gameLoop();
                }
            }

            function stopSimulation() {
                isRunning = false;
                cancelAnimationFrame(animationFrameId);
            }

            function resetSimulation() {
                stopSimulation();
                time = 0;
                riverFlowOffset = 0;
                swimmer1 = { x: 0, y: 0, finished: false };
                swimmer2 = { x: 0, y: 0, finished: false, isWalking: false };
                timeDisplay.textContent = `Time: 0.00 h`;
                draw();
            }

            startButton.addEventListener('click', startSimulation);
            resetButton.addEventListener('click', resetSimulation);
            
            // Initial draw
            draw();
        };
    </script>
</body>
</html>
